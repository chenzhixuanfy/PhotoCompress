## 图片批量压缩：img_compress.ipynb
保持图片分辨率和目录结构，进行批量有损压缩，压缩后的文件保存在新的文件夹下

注：
1. quality相同的多次压缩等效于单次压缩
2. 压缩比裁切效果好，裁切容易降低图片的解析力

## 视频批量压缩：vid_encode.bat
### 脚本内容
```batch
@echo off
:: 创建一个名为 "output" 的文件夹来存放压制后的视频
if not exist "output" mkdir "output"

:: 遍历当前目录下所有的 .mp4 文件
for %%F in (*.mp4) do (
    echo =========================================
    echo      Encoding: %%F
    echo =========================================
    
    :: FFmpeg 核心命令
    ffmpeg -i "%%F" -c:v libx265 -crf 24 -preset medium -c:a copy "output\%%~nF_encoded.mp4"
)

echo.
echo All tasks have been completed.
pause
```
将bat脚本放在视频文件夹下，双击运行，以h265编码器压缩所有mp4视频，在output子文件夹中存放压缩后的视频文件。

### FFmpeg 命令详解与自定义

上面脚本中核心的命令是这一行：
`ffmpeg -i "输入文件" [参数] "输出文件"`

可以根据自己的需求修改其中的参数：

  * `-i "%%F"` 或 `-i "$file"`: 指定输入文件，脚本会自动替换为当前正在处理的文件名。
  * **`-c:v libx265`**: 指定视频编码器。
      * `libx265`: 使用 H.265 (HEVC) 编码。压缩率更高，文件更小，但编码速度更慢，老设备兼容性稍差。
      * `libx264`: 使用 H.264 (AVC) 编码。兼容性极好，编码速度快，但相同画质下文件体积比 H.265 大。
  * **`-crf 28`**: **(核心参数) 控制视频质量**。CRF (Constant Rate Factor) 是一个衡量质量的数值。
      * 数值**越低**，画质**越高**，文件体积**越大**。
      * 数值**越高**，画质**越低**，文件体积**越小**。
      * 对于 `libx265`，推荐范围是 24-30，`28` 是一个不错的平衡点。
      * 对于 `libx264`，推荐范围是 20-26，`23` 是一个常用的平衡点。
  * **`-preset medium`**: **控制编码速度和压缩效率**。
      * 可选值包括：`ultrafast`, `superfast`, `veryfast`, `faster`, `fast`, `medium`, `slow`, `slower`, `veryslow`。
      * 速度**越快** (`ultrafast`)，压缩效率**越低**（文件越大）。
      * 速度**越慢** (`veryslow`)，压缩效率**越高**（文件越小）。
      * `medium` 是默认值，在速度和质量之间取得了很好的平衡。通常使用 `medium` 或 `slow` 即可。
  * **`-c:a copy`**: 指定音频处理方式。
      * `copy` 的意思是**直接复制**原始音频流，不做任何处理。这样可以保证音频无损，并且速度极快。**强烈推荐**在不需要改变音频的情况下使用此选项。
      * 如果想同时压缩音频，可以替换为例如 `aac` 编码器并指定比特率：`-c:a aac -b:a 128k`。
  * `"output\%%~nF_encoded.mp4"`: 指定输出路径和文件名。脚本会自动在原文件名后加上 `_encoded` 后缀，并保存在 `output` 文件夹中，以防覆盖原文件。